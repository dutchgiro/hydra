<html><head><title>Hydra Design v3</title><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=lhDjYqiy3mZ0x6ROQEUoUw');.lst-kix_8fco7wilc41w-0>li{counter-increment:lst-ctn-kix_8fco7wilc41w-0}.lst-kix_7zix5svgpm3x-7>li:before{content:"\0025cb  "}ol.lst-kix_8fco7wilc41w-0.start{counter-reset:lst-ctn-kix_8fco7wilc41w-0 0}.lst-kix_wfuq1jfn26h-3>li:before{content:"\0025cf  "}.lst-kix_f7zjb9s6ofph-1>li:before{content:"" counter(lst-ctn-kix_f7zjb9s6ofph-1,lower-latin) ". "}.lst-kix_f7zjb9s6ofph-2>li:before{content:"" counter(lst-ctn-kix_f7zjb9s6ofph-2,lower-roman) ". "}.lst-kix_fsxipfpvp1zi-4>li:before{content:"\0025cb  "}.lst-kix_wfuq1jfn26h-1>li:before{content:"\0025cb  "}.lst-kix_wfuq1jfn26h-2>li:before{content:"\0025a0  "}.lst-kix_wfuq1jfn26h-5>li:before{content:"\0025a0  "}ul.lst-kix_fsxipfpvp1zi-8{list-style-type:none}ol.lst-kix_f7zjb9s6ofph-2.start{counter-reset:lst-ctn-kix_f7zjb9s6ofph-2 0}ul.lst-kix_fsxipfpvp1zi-7{list-style-type:none}.lst-kix_8fco7wilc41w-1>li{counter-increment:lst-ctn-kix_8fco7wilc41w-1}ul.lst-kix_fsxipfpvp1zi-1{list-style-type:none}ul.lst-kix_fsxipfpvp1zi-2{list-style-type:none}.lst-kix_8fco7wilc41w-5>li{counter-increment:lst-ctn-kix_8fco7wilc41w-5}ul.lst-kix_fsxipfpvp1zi-0{list-style-type:none}ul.lst-kix_fsxipfpvp1zi-5{list-style-type:none}ul.lst-kix_fsxipfpvp1zi-6{list-style-type:none}ul.lst-kix_fsxipfpvp1zi-3{list-style-type:none}ul.lst-kix_fsxipfpvp1zi-4{list-style-type:none}.lst-kix_f7zjb9s6ofph-8>li:before{content:"" counter(lst-ctn-kix_f7zjb9s6ofph-8,lower-roman) ". "}.lst-kix_f7zjb9s6ofph-1>li{counter-increment:lst-ctn-kix_f7zjb9s6ofph-1}ol.lst-kix_8fco7wilc41w-5.start{counter-reset:lst-ctn-kix_8fco7wilc41w-5 0}ul.lst-kix_wfuq1jfn26h-0{list-style-type:none}.lst-kix_f7zjb9s6ofph-4>li:before{content:"" counter(lst-ctn-kix_f7zjb9s6ofph-4,lower-latin) ". "}.lst-kix_8fco7wilc41w-2>li:before{content:"" counter(lst-ctn-kix_8fco7wilc41w-2,lower-roman) ". "}.lst-kix_7zix5svgpm3x-0>li:before{content:"\0025cf  "}.lst-kix_7zix5svgpm3x-4>li:before{content:"\0025cb  "}.lst-kix_fsxipfpvp1zi-2>li:before{content:"\0025a0  "}.lst-kix_8fco7wilc41w-7>li{counter-increment:lst-ctn-kix_8fco7wilc41w-7}.lst-kix_8fco7wilc41w-8>li{counter-increment:lst-ctn-kix_8fco7wilc41w-8}ol.lst-kix_8fco7wilc41w-1{list-style-type:none}ol.lst-kix_8fco7wilc41w-2{list-style-type:none}ol.lst-kix_8fco7wilc41w-0{list-style-type:none}.lst-kix_wfuq1jfn26h-8>li:before{content:"\0025a0  "}.lst-kix_f7zjb9s6ofph-3>li{counter-increment:lst-ctn-kix_f7zjb9s6ofph-3}.lst-kix_8fco7wilc41w-3>li:before{content:"" counter(lst-ctn-kix_8fco7wilc41w-3,decimal) ". "}.lst-kix_wfuq1jfn26h-6>li:before{content:"\0025cf  "}.lst-kix_f7zjb9s6ofph-8>li{counter-increment:lst-ctn-kix_f7zjb9s6ofph-8}.lst-kix_f7zjb9s6ofph-6>li{counter-increment:lst-ctn-kix_f7zjb9s6ofph-6}ol.lst-kix_8fco7wilc41w-6{list-style-type:none}ol.lst-kix_8fco7wilc41w-5{list-style-type:none}ol.lst-kix_8fco7wilc41w-4{list-style-type:none}ol.lst-kix_8fco7wilc41w-3{list-style-type:none}.lst-kix_f7zjb9s6ofph-7>li:before{content:"" counter(lst-ctn-kix_f7zjb9s6ofph-7,lower-latin) ". "}ol.lst-kix_8fco7wilc41w-8{list-style-type:none}ol.lst-kix_8fco7wilc41w-7{list-style-type:none}ol.lst-kix_f7zjb9s6ofph-0.start{counter-reset:lst-ctn-kix_f7zjb9s6ofph-0 0}.lst-kix_wfuq1jfn26h-4>li:before{content:"\0025cb  "}ol.lst-kix_8fco7wilc41w-8.start{counter-reset:lst-ctn-kix_8fco7wilc41w-8 0}ol.lst-kix_f7zjb9s6ofph-1.start{counter-reset:lst-ctn-kix_f7zjb9s6ofph-1 0}ol.lst-kix_f7zjb9s6ofph-7.start{counter-reset:lst-ctn-kix_f7zjb9s6ofph-7 0}ol.lst-kix_f7zjb9s6ofph-4.start{counter-reset:lst-ctn-kix_f7zjb9s6ofph-4 0}ol.lst-kix_8fco7wilc41w-7.start{counter-reset:lst-ctn-kix_8fco7wilc41w-7 0}ol.lst-kix_f7zjb9s6ofph-3.start{counter-reset:lst-ctn-kix_f7zjb9s6ofph-3 0}ol.lst-kix_f7zjb9s6ofph-0{list-style-type:none}.lst-kix_8fco7wilc41w-0>li:before{content:"" counter(lst-ctn-kix_8fco7wilc41w-0,decimal) ". "}.lst-kix_8fco7wilc41w-2>li{counter-increment:lst-ctn-kix_8fco7wilc41w-2}ol.lst-kix_f7zjb9s6ofph-2{list-style-type:none}.lst-kix_8fco7wilc41w-4>li:before{content:"" counter(lst-ctn-kix_8fco7wilc41w-4,lower-latin) ". "}ol.lst-kix_f7zjb9s6ofph-1{list-style-type:none}ol.lst-kix_f7zjb9s6ofph-4{list-style-type:none}ol.lst-kix_f7zjb9s6ofph-3{list-style-type:none}ol.lst-kix_f7zjb9s6ofph-6{list-style-type:none}ol.lst-kix_f7zjb9s6ofph-5{list-style-type:none}.lst-kix_f7zjb9s6ofph-5>li{counter-increment:lst-ctn-kix_f7zjb9s6ofph-5}ol.lst-kix_f7zjb9s6ofph-8{list-style-type:none}ol.lst-kix_f7zjb9s6ofph-7{list-style-type:none}ul.lst-kix_wfuq1jfn26h-7{list-style-type:none}ul.lst-kix_wfuq1jfn26h-8{list-style-type:none}.lst-kix_f7zjb9s6ofph-7>li{counter-increment:lst-ctn-kix_f7zjb9s6ofph-7}ul.lst-kix_wfuq1jfn26h-5{list-style-type:none}ul.lst-kix_wfuq1jfn26h-6{list-style-type:none}ul.lst-kix_wfuq1jfn26h-3{list-style-type:none}ul.lst-kix_wfuq1jfn26h-4{list-style-type:none}ul.lst-kix_wfuq1jfn26h-1{list-style-type:none}.lst-kix_fsxipfpvp1zi-6>li:before{content:"\0025cf  "}ol.lst-kix_8fco7wilc41w-1.start{counter-reset:lst-ctn-kix_8fco7wilc41w-1 0}ul.lst-kix_wfuq1jfn26h-2{list-style-type:none}.lst-kix_f7zjb9s6ofph-4>li{counter-increment:lst-ctn-kix_f7zjb9s6ofph-4}.lst-kix_8fco7wilc41w-8>li:before{content:"" counter(lst-ctn-kix_8fco7wilc41w-8,lower-roman) ". "}.lst-kix_8fco7wilc41w-7>li:before{content:"" counter(lst-ctn-kix_8fco7wilc41w-7,lower-latin) ". "}ul.lst-kix_7zix5svgpm3x-8{list-style-type:none}ul.lst-kix_7zix5svgpm3x-6{list-style-type:none}ul.lst-kix_7zix5svgpm3x-7{list-style-type:none}.lst-kix_7zix5svgpm3x-2>li:before{content:"\0025a0  "}.lst-kix_7zix5svgpm3x-8>li:before{content:"\0025a0  "}ul.lst-kix_7zix5svgpm3x-0{list-style-type:none}.lst-kix_8fco7wilc41w-3>li{counter-increment:lst-ctn-kix_8fco7wilc41w-3}ul.lst-kix_7zix5svgpm3x-1{list-style-type:none}.lst-kix_8fco7wilc41w-5>li:before{content:"" counter(lst-ctn-kix_8fco7wilc41w-5,lower-roman) ". "}.lst-kix_7zix5svgpm3x-1>li:before{content:"\0025cb  "}ul.lst-kix_7zix5svgpm3x-4{list-style-type:none}ul.lst-kix_7zix5svgpm3x-5{list-style-type:none}ul.lst-kix_7zix5svgpm3x-2{list-style-type:none}.lst-kix_f7zjb9s6ofph-2>li{counter-increment:lst-ctn-kix_f7zjb9s6ofph-2}ul.lst-kix_7zix5svgpm3x-3{list-style-type:none}.lst-kix_fsxipfpvp1zi-0>li:before{content:"\0025cf  "}ol.lst-kix_8fco7wilc41w-3.start{counter-reset:lst-ctn-kix_8fco7wilc41w-3 0}.lst-kix_fsxipfpvp1zi-5>li:before{content:"\0025a0  "}ol.lst-kix_f7zjb9s6ofph-5.start{counter-reset:lst-ctn-kix_f7zjb9s6ofph-5 0}.lst-kix_7zix5svgpm3x-6>li:before{content:"\0025cf  "}ol.lst-kix_8fco7wilc41w-4.start{counter-reset:lst-ctn-kix_8fco7wilc41w-4 0}.lst-kix_7zix5svgpm3x-5>li:before{content:"\0025a0  "}ol.lst-kix_f7zjb9s6ofph-8.start{counter-reset:lst-ctn-kix_f7zjb9s6ofph-8 0}.lst-kix_8fco7wilc41w-6>li{counter-increment:lst-ctn-kix_8fco7wilc41w-6}.lst-kix_f7zjb9s6ofph-0>li:before{content:"" counter(lst-ctn-kix_f7zjb9s6ofph-0,decimal) ". "}ol.lst-kix_8fco7wilc41w-2.start{counter-reset:lst-ctn-kix_8fco7wilc41w-2 0}.lst-kix_fsxipfpvp1zi-3>li:before{content:"\0025cf  "}ol.lst-kix_f7zjb9s6ofph-6.start{counter-reset:lst-ctn-kix_f7zjb9s6ofph-6 0}.lst-kix_fsxipfpvp1zi-7>li:before{content:"\0025cb  "}.lst-kix_wfuq1jfn26h-7>li:before{content:"\0025cb  "}ol.lst-kix_8fco7wilc41w-6.start{counter-reset:lst-ctn-kix_8fco7wilc41w-6 0}.lst-kix_f7zjb9s6ofph-5>li:before{content:"" counter(lst-ctn-kix_f7zjb9s6ofph-5,lower-roman) ". "}.lst-kix_fsxipfpvp1zi-8>li:before{content:"\0025a0  "}.lst-kix_fsxipfpvp1zi-1>li:before{content:"\0025cb  "}.lst-kix_f7zjb9s6ofph-6>li:before{content:"" counter(lst-ctn-kix_f7zjb9s6ofph-6,decimal) ". "}.lst-kix_wfuq1jfn26h-0>li:before{content:"\0025cf  "}.lst-kix_8fco7wilc41w-4>li{counter-increment:lst-ctn-kix_8fco7wilc41w-4}.lst-kix_f7zjb9s6ofph-0>li{counter-increment:lst-ctn-kix_f7zjb9s6ofph-0}.lst-kix_8fco7wilc41w-6>li:before{content:"" counter(lst-ctn-kix_8fco7wilc41w-6,decimal) ". "}.lst-kix_7zix5svgpm3x-3>li:before{content:"\0025cf  "}.lst-kix_8fco7wilc41w-1>li:before{content:"" counter(lst-ctn-kix_8fco7wilc41w-1,lower-latin) ". "}.lst-kix_f7zjb9s6ofph-3>li:before{content:"" counter(lst-ctn-kix_f7zjb9s6ofph-3,decimal) ". "}ol{margin:0;padding:0}.c29{border-bottom-width:1pt;border-top-style:solid;width:177pt;border-right-style:solid;padding:5pt 10pt 5pt 10pt;border-bottom-color:#cccccc;border-top-width:1pt;border-bottom-style:solid;vertical-align:top;border-top-color:#cccccc;border-left-color:#cccccc;border-right-color:#cccccc;border-left-style:solid;border-right-width:1pt;border-left-width:1pt}.c12{border-bottom-width:1pt;border-top-style:solid;width:225pt;border-right-style:solid;padding:5pt 10pt 5pt 10pt;border-bottom-color:#cccccc;border-top-width:1pt;border-bottom-style:solid;vertical-align:top;border-top-color:#cccccc;border-left-color:#cccccc;border-right-color:#cccccc;border-left-style:solid;border-right-width:1pt;border-left-width:1pt}.c23{border-bottom-width:1pt;border-top-style:solid;width:174pt;border-right-style:solid;padding:5pt 10pt 5pt 10pt;border-bottom-color:#cccccc;border-top-width:1pt;border-bottom-style:solid;vertical-align:top;border-top-color:#cccccc;border-left-color:#cccccc;border-right-color:#cccccc;border-left-style:solid;border-right-width:1pt;border-left-width:1pt}.c16{border-bottom-width:1pt;border-top-style:solid;width:120.8pt;border-right-style:solid;padding:5pt 10pt 5pt 10pt;border-bottom-color:#cccccc;border-top-width:1pt;border-bottom-style:solid;vertical-align:top;border-top-color:#cccccc;border-left-color:#cccccc;border-right-color:#cccccc;border-left-style:solid;border-right-width:1pt;border-left-width:1pt}.c8{border-bottom-width:1pt;border-top-style:solid;width:117pt;border-right-style:solid;padding:5pt 10pt 5pt 10pt;border-bottom-color:#cccccc;border-top-width:1pt;border-bottom-style:solid;vertical-align:top;border-top-color:#cccccc;border-left-color:#cccccc;border-right-color:#cccccc;border-left-style:solid;border-right-width:1pt;border-left-width:1pt}.c13{border-bottom-width:1pt;border-top-style:solid;width:122.2pt;border-right-style:solid;padding:5pt 10pt 5pt 10pt;border-bottom-color:#cccccc;border-top-width:1pt;border-bottom-style:solid;vertical-align:top;border-top-color:#cccccc;border-left-color:#cccccc;border-right-color:#cccccc;border-left-style:solid;border-right-width:1pt;border-left-width:1pt}.c11{vertical-align:baseline;color:#333333;font-size:11pt;font-style:normal;background-color:#ffffff;font-family:"Arial";text-decoration:none;font-weight:normal}.c2{vertical-align:baseline;color:#000000;font-size:11pt;font-style:normal;font-family:"Arial";text-decoration:none;font-weight:normal}.c22{color:#666666;font-size:12pt;font-family:"Trebuchet MS";text-decoration:underline;font-weight:bold}.c1{line-height:1.0;padding-top:0pt;text-align:left;direction:ltr;padding-bottom:0pt}.c15{line-height:1.5;padding-top:11pt;text-align:left;padding-bottom:11pt}.c21{color:#333333;background-color:#ffffff;font-weight:bold}.c0{padding-left:0pt;direction:ltr;margin-left:72pt}.c10{max-width:538.6pt;background-color:#ffffff;padding:56.7pt 38.3pt 56.7pt 35.1pt}.c18{margin-right:auto;border-collapse:collapse}.c17{margin:0;padding:0}.c4{background-color:#ff0000;font-weight:bold}.c3{color:#1155cc;text-decoration:underline}.c25{padding-left:0pt;margin-left:36pt}.c7{font-size:9pt;font-family:"Consolas"}.c28{color:inherit;text-decoration:inherit}.c14{padding-top:10pt}.c27{height:12pt}.c6{height:11pt}.c24{text-decoration:underline}.c9{line-height:1.0}.c20{height:13pt}.c19{height:0pt}.c5{direction:ltr}.c26{text-align:center}.title{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt}.subtitle{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt}h2{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h3{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h4{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt}h5{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}h6{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}</style></head><body class="c10"><p class="c5 title"><a name="h.aqule8t7wzct"></a><span>Hydra Concept</span></p><p class="c5"><span>Multi-cloud application discovery, management and balancing.</span></p><p class="c6 c5"><span></span></p><p class="c5 c26"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 734.00px; height: 662.00px;"><img alt="" src="images/image01.png" style="width: 734.00px; height: 662.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6 c5 title"><a name="h.v6kbufg9zj8g"></a></p><hr style="page-break-before:always;display:none;"><p class="c6 c5 title"><a name="h.779v7hnsxs3r"></a></p><p class="c5 title"><a name="h.4nl9kb97qp36"></a><span>Architecture</span></p><p class="c5 c26"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 718.00px; height: 538.67px;"><img alt="Hydra v3 Architecture.jpg" src="images/image00.jpg" style="width: 718.00px; height: 538.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6 c5 title"><a name="h.bi37yuml5o68"></a></p><p class="c5 title"><a name="h.7hhj5ikt4htj"></a><span>Implementation</span></p><h1 class="c5 c14"><a name="h.hwmx7vgdt0ky"></a><span>Hydra Basic Probe</span></h1><p class="c5"><span>The Hydra Basic Probe is in charge of check and monitor one server and update the status information at one or several Hydra Servers using the restful server API.</span></p><p class="c6 c5"><span></span></p><p class="c5"><span>The basic functionality is to notify to one Hydra Server when an application is Started, Stopping, or Removed. In addition, it will provide information about the server health status like CPU and memory usage and any useful information like the size of the server, TTL, etc.</span></p><p class="c6 c5"><span></span></p><p class="c5"><span>All these information should be updated periodically. If not, the hydra server will assume that the servers are shutted down.</span></p><h1 class="c5"><a name="h.6vubxq3qwl4t"></a><span>Hydra Server</span></h1><h2 class="c5"><a name="h.yt731lg2srsh"></a><span>Client API (Rest)</span></h2><p class="c5"><span>This module will expose a basic restful API for Hydra Client.</span></p><p class="c6 c5"><span></span></p><a href="#" name="1cfc9299dcb80f593482a71303a82a1a9f09237a"></a><a href="#" name="0"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c19"><td class="c8"><p class="c15 c5"><span class="c21">Operation</span></p></td><td class="c23"><p class="c15 c5"><span class="c21">HTTP action</span></p></td><td class="c29"><p class="c15 c5"><span class="c21">Description</span></p></td></tr><tr class="c19"><td class="c8"><p class="c1"><span class="c2">Find a server/s for a given appID.</span></p></td><td class="c23"><p class="c1"><span class="c2">GET /apps/{appID}</span></p></td><td class="c29"><p class="c1"><span class="c2">Response example: [&ldquo;http://mycompany.com/api&rdquo;]</span></p><p class="c1"><span class="c2">Code 200 on success.</span></p><p class="c1"><span class="c2">Code 500 on error.</span></p><p class="c1"><span class="c2">*Maybe add some info about local balancing</span></p></td></tr><tr class="c19"><td class="c8"><p class="c1"><span>Get the list of active hydra servers. Including itself.</span></p></td><td class="c23"><p class="c1"><span>GET /apps/hydra</span></p></td><td class="c29"><p class="c1"><span class="c2">Response example:</span></p><p class="c1"><span class="c2">[</span></p><p class="c1"><span class="c2">&ldquo;http://hydra1.com:5000&rdquo;,</span></p><p class="c1"><span class="c2">&ldquo;http://hydra2.com:6000&rdquo;</span></p><p class="c1"><span class="c2">]</span></p><p class="c1"><span class="c2">Code 200 on success.</span></p><p class="c1"><span>Code 500 on error.</span></p></td></tr></tbody></table><h2 class="c20 c5"><a name="h.keppoguvv08s"></a></h2><hr style="page-break-before:always;display:none;"><h2 class="c5 c20"><a name="h.aw77ycvw5p63"></a></h2><h2 class="c5"><a name="h.mw7t35z23fe0"></a><span>Server API (Rest)</span></h2><p class="c5"><span>This module will expose a restful API for administration (Hydra Basic Probe and Monitor).</span></p><p class="c6 c5"><span></span></p><a href="#" name="ef44cd7a7a0ed540692cdf38c54dd2aeb24103bf"></a><a href="#" name="1"></a><table cellpadding="0" cellspacing="0" class="c18"><tbody><tr class="c19"><td class="c16"><p class="c15 c5"><span class="c21">Operation</span></p></td><td class="c13"><p class="c5 c15"><span class="c21">HTTP action</span></p></td><td class="c12"><p class="c15 c5"><span class="c21">Description</span></p></td></tr><tr class="c19"><td class="c16"><p class="c1"><span class="c2">Register or update an app</span></p></td><td class="c13"><p class="c1"><span class="c2">POST /apps/{appID}/Instances</span></p></td><td class="c12"><p class="c1"><span class="c2">Post data example:</span></p><p class="c1"><span class="c2">{&quot;myserverName&quot;: </span></p><p class="c1"><span>&nbsp; &nbsp;{&quot;cpuLoad&quot;: 91, &quot;uri&quot;: &quot;</span><span class="c3"><a class="c28" href="http://www.google.com/url?q=http%3A%2F%2Fhydra-v3-demo-time-0.aws-ireland.innotechapp.com%3A8080&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNFhKNEeOZLHF6UQYDvLKhcd3dcmbA">http://hydra-v3-demo-time-0.aws-ireland.innotechapp.com:8080</a></span><span class="c2">&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &quot;connections&quot;: 0,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &quot;memLoad&quot;: 91,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &quot;state&quot;: 0,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &quot;cost&quot;: &quot;3&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &quot;ttl&quot;: &quot;20&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &quot;cloud&quot;: &quot;aws-eu-west-1a&quot;}</span></p><p class="c1"><span class="c2">&nbsp; &nbsp;}</span></p><p class="c1"><span class="c2">}</span></p><p class="c1"><span class="c2">Code 200 on success.</span></p><p class="c1"><span class="c2">Code 500 on error.</span></p></td></tr><tr class="c19"><td class="c16"><p class="c1"><span>Get all apps</span></p></td><td class="c13"><p class="c1"><span>GET /apps/</span></p></td><td class="c12"><p class="c1"><span class="c2">Response example:</span></p><p class="c1"><span class="c2">[</span></p><p class="c1"><span class="c2">&nbsp; {</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &quot;hydra&quot;: {</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &quot;Balancers&quot;: {</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;0&quot;: {</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;simple&quot;: &quot;OK&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;worker&quot;: &quot;RoundRobin&quot;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; },</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &quot;Instances&quot;: {</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;ip-10-110-35-230&quot;: {</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;cloud&quot;: &quot;aws-us-west-2b&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;connections&quot;: &quot;11.00&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;cost&quot;: &quot;9&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;cpuLoad&quot;: &quot;0.00&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;demoMode&quot;: &quot;unlocked&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;memLoad&quot;: &quot;14.30&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;state&quot;: &quot;0.00&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;ttl&quot;: &quot;20&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;uri&quot;: &quot;http://hydra-v3-demo-server-1.aws-oregon.innotechapp.com:7781&quot;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;ip-10-112-20-17&quot;: {</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;cloud&quot;: &quot;aws-eu-west-1a&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;connections&quot;: &quot;22.00&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;cost&quot;: &quot;3&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;cpuLoad&quot;: &quot;3.90&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;demoMode&quot;: &quot;unlocked&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;memLoad&quot;: &quot;17.50&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;state&quot;: &quot;0.00&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;ttl&quot;: &quot;20&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;uri&quot;: &quot;http://hydra-v3-demo-server-0.aws-ireland.innotechapp.com:7781&quot;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; }</span></p><p class="c1"><span class="c2">&nbsp; },</span></p><p class="c1"><span class="c2">...</span></p><p class="c1"><span class="c2">]</span></p><p class="c1 c6"><span class="c2"></span></p><p class="c1"><span class="c2">Code 200 on success.</span></p><p class="c1"><span>Code 500 on error.</span></p></td></tr><tr class="c19"><td class="c16"><p class="c1"><span>Get one app</span></p></td><td class="c13"><p class="c1"><span>GET /apps/{appID}</span></p></td><td class="c12"><p class="c1"><span class="c2">Response example:</span></p><p class="c1"><span class="c2">{</span></p><p class="c1"><span class="c2">&nbsp; &quot;hydra&quot;: {</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &quot;Balancers&quot;: {</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &quot;0&quot;: {</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;simple&quot;: &quot;OK&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;worker&quot;: &quot;RoundRobin&quot;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; },</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &quot;Instances&quot;: {</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &quot;ip-10-110-35-230&quot;: {</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;cloud&quot;: &quot;aws-us-west-2b&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;connections&quot;: &quot;11.00&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;cost&quot;: &quot;9&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;cpuLoad&quot;: &quot;0.00&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;demoMode&quot;: &quot;unlocked&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;memLoad&quot;: &quot;14.50&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;state&quot;: &quot;0.00&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;ttl&quot;: &quot;20&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;uri&quot;: &quot;http://hydra-v3-demo-server-1.aws-oregon.innotechapp.com:7781&quot;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; },</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &quot;ip-10-112-20-17&quot;: {</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;cloud&quot;: &quot;aws-eu-west-1a&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;connections&quot;: &quot;20.00&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;cost&quot;: &quot;3&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;cpuLoad&quot;: &quot;4.00&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;demoMode&quot;: &quot;unlocked&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;memLoad&quot;: &quot;17.30&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;state&quot;: &quot;0.00&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;ttl&quot;: &quot;20&quot;,</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &quot;uri&quot;: &quot;http://hydra-v3-demo-server-0.aws-ireland.innotechapp.com:7781&quot;</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c2">&nbsp; &nbsp; }</span></p><p class="c1"><span class="c2">&nbsp; }</span></p><p class="c1"><span class="c2">}</span></p><p class="c1"><span class="c2">Code 200 on success.</span></p><p class="c1"><span>Code 500 on error.</span></p></td></tr></tbody></table><p class="c5 c6"><span></span></p><h2 class="c9 c5"><a name="h.w3x8wzvzaz6f"></a><span>Balancing Chain</span></h2><p class="c6 c9 c5"><span></span></p><p class="c9 c5"><span>When you configure the master Hydra Server is mandatory to define the balancing chain that will be used for every application. For example:</span></p><p class="c6 c5 c9"><span></span></p><p class="c5"><span class="c7">[{<br> &nbsp; &nbsp;&quot;App1&quot;: {<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;Balancers&quot;: [<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;worker&quot;: &quot;MapAndSort&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;mapAttr&quot;: &quot;cloud&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;mapSort&quot;: [&quot;google&quot;, &quot;amazon&quot;, &quot;azure&quot;]<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;},<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;worker&quot;: &quot;SortByNumber&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;sortAttr&quot;: &quot;cpuLoad&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;order&quot;: 1<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;]<br> &nbsp; &nbsp;}<br>}, {<br> &nbsp; &nbsp;&quot;App2&quot;: {<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;Balancers&quot;: [<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;worker&quot;: &quot;MapByLimit&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;limitAttr&quot;: &quot;limit&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;limitValue&quot;: 50,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;mapSort&quot;: &quot;reverse&quot;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;},<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;worker&quot;: &quot;RoundRobin&quot;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;simple&quot;: &quot;OK&quot;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;]<br> &nbsp; &nbsp;}<br>}]</span></p><p class="c6 c5"><span class="c7"></span></p><p class="c5"><span class="c7">This configuration will define two possible apps (&ldquo;App1&rdquo; and &ldquo;App2&rdquo;). POST for differents apps will be rejected from Hydra Server.</span></p><p class="c6 c5"><span class="c7"></span></p><p class="c5"><span class="c7">B</span><span class="c7">alancing chain </span><span class="c7">is defined in the object &ldquo;Balancers&rdquo; and they will be executed in every GET invocation to the public API for that app.</span></p><h1 class="c5"><a name="h.thxwnajl2b94"></a><span>Hydra Client</span></h1><p class="c6 c5"><span class="c4"></span></p><p class="c5"><span>There are several Hydra clients for Java, Javascript Web, Javascript Node, etc. But the basic functionality is the same. We are going to explain here the basic Javascript client.</span></p><p class="c6 c5"><span></span></p><p class="c5"><span>Hydra client is a js file that should be included in the web page or node project. It provides two functions:</span></p><p class="c6 c5"><span></span></p><p class="c5"><span class="c22">function hydra.config([&lt;server list&gt;], options)</span></p><ul class="c17 lst-kix_7zix5svgpm3x-0 start"><li class="c25 c5"><span>[&lt;server list&gt;] - the initial servers we want to use to access Hydra.</span></li><li class="c25 c5"><span>options - (optional) object containing the following fields:</span></li></ul><ul class="c17 lst-kix_7zix5svgpm3x-1 start"><li class="c0"><span>hydraTimeOut - timeout for updating Hydra Servers. Minimum of 60 seconds</span></li><li class="c0"><span>appTimeOut - timeout for updating an app server in the internal cache. Minimum 20 seconds</span></li><li class="c0"><span>retryOnFail - retry timeout in case the hydra we are requesting an app or new Hydra servers fail to answer. Minimum 500ms</span></li></ul><p class="c6 c5"><span></span></p><p class="c5"><span>By default, the initial Hydra server will be the host serving the Hydra client file, making this function call optional on the browser, although it&rsquo;s recommended to set up the servers.</span></p><h3 class="c5 c27"><a name="h.fmjud52lly7b"></a></h3><h3 class="c5"><a name="h.u6vyskoivqlq"></a><span class="c24">function hydra.get(appID, nocache, callback)</span></h3><p class="c5"><span>This function will call to callback(error, [servers]) function with the url of the server that provides the given appID.</span></p><ul class="c17 lst-kix_fsxipfpvp1zi-0 start"><li class="c5 c25"><span>appID - id of the application requested</span></li><li class="c25 c5"><span>nocache - boolean, if set to true will ask the hydra server for the application servers ignoring the internal cache.</span></li><li class="c25 c5"><span>callback(error, [servers]) - function callback that will receive the app server or an error in case the app does not exist</span></li></ul><p class="c6 c5"><span></span></p><p class="c5"><span>Internally, it will ask to the first Hydra server or use the internal cache in order to get the corresponding server url for the app and then it will call to callback function. If the application exist, the servers are sent back and served through the callback function (if the application exist, but there are no servers available, it will return an empty array). If the application does not exist, the callback will receive an error and the list will be set to null.</span></p><p class="c6 c5"><span></span></p><p class="c5"><span>In case an Hydra server fails to answer (when requesting an app or new Hydra servers), the client will try again (based on the retryOnFail timeout) using the next server and moving the one that failed to the end of the list until one of the Hydra servers replies.</span></p><p class="c6 c5"><span></span></p><h4 class="c5"><a name="h.raivu0om7ayh"></a><span>Example of use with pooling every minute</span></h4><p class="c6 c5"><span></span></p><p class="c5"><span>var app1url = []</span></p><p class="c5"><span>var interval = setInterval(hydra.get(app1id, false, function(data) { app1url = data }, 60000)</span></p><p class="c5"><span>&hellip;</span></p><p class="c5"><span>$.ajax({</span></p><p class="c5"><span>&nbsp; url: app1url[0] ,</span></p><p class="c5"><span>&nbsp; sucess: {</span></p><p class="c5"><span>&nbsp; &nbsp; &nbsp;&hellip;.</span></p><p class="c5"><span>&nbsp; });</span></p><h4 class="c5"><a name="h.22k6e46kz3xg"></a><span>Example of use renewing server url only on error</span></h4><p class="c6 c5"><span></span></p><p class="c5"><span>var retry = 0</span></p><p class="c5"><span>var NUM_RETRIES = 2</span></p><p class="c5"><span>hydra(app1id, false, myfunction);</span></p><p class="c5"><span>myfunction(app1url) {</span></p><p class="c5"><span>&nbsp; $.ajax({</span></p><p class="c5"><span>&nbsp; &nbsp; url: app1url[0] ,</span></p><p class="c5"><span>&nbsp; &nbsp; sucess: {</span></p><p class="c5"><span>&nbsp; &nbsp; &nbsp; retry = 0;</span></p><p class="c5"><span>&nbsp; &nbsp; &nbsp; ...</span></p><p class="c5"><span>&nbsp; &nbsp; },</span></p><p class="c5"><span>&nbsp; &nbsp; error: {</span></p><p class="c5"><span>&nbsp; &nbsp; &nbsp; if (retry&lt;NUM_RETRIES ) {</span></p><p class="c5"><span>&nbsp; &nbsp; &nbsp; &nbsp; hydra.get(app1id, true, myfunction);</span></p><p class="c5"><span>&nbsp; &nbsp; &nbsp; &nbsp; retry++;</span></p><p class="c5"><span>&nbsp; &nbsp; &nbsp; }</span></p><p class="c5"><span>&nbsp; &nbsp; }</span></p><p class="c5"><span>&nbsp; });</span></p><p class="c5"><span>}</span></p><p class="c6 c5"><span></span></p></body></html>